<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        Coffee + Software with Josh Long
    </title>
    <meta name="description" content="Coffee + Software with Josh Long ">
    <meta name="author" content="Josh Long">

    <meta property="og:title" content="A Basic HTML5 Template">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://coffeesoftware.com">
    <meta property="og:description" content="You've got plenty of things you could be watching. Why this?">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">


    <style>
        .video {
            padding: 1em ;
            border-top: 1px solid black;
            margin-top: 2em;
        }
    </style>
</head>

<body>


<!-- Cookie Consent by TermsFeed https://www.TermsFeed.com -->
<script type="text/javascript" src="//www.termsfeed.com/public/cookie-consent/4.1.0/cookie-consent.js"
        charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
    document.addEventListener('DOMContentLoaded', function () {
        cookieconsent.run({
            "notice_banner_type": "headline",
            "consent_type": "express",
            "palette": "dark",
            "language": "en",
            "page_load_consent_levels": ["strictly-necessary"],
            "notice_banner_reject_button_hide": false,
            "preferences_center_close_button_hide": false,
            "page_refresh_confirmation_buttons": false
        });
    });
</script>

<noscript>Free cookie consent management tool by <a href="https://www.termsfeed.com/" rel="nofollow noopener">TermsFeed
    Privacy Suite Generator</a></noscript>
<!-- End Cookie Consent by TermsFeed https://www.TermsFeed.com -->

<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://unpkg.com/mustache@latest"></script>
<script>
    window.trackingPermitted = window.trackingPermitted || false
    console.log('tracking=false')
    let videos = [];

    function renderVideos() {
        console.log('rendering videos', videos)
        const template = document.getElementById('template').innerHTML;
        document.getElementById('target').innerHTML = Mustache.render(template, {
            trackingPermitted: window.trackingPermitted,
            videos: videos
        });
    }

    window.addEventListener('load', function () {
        console.log('fetching videos!')
        window.fetch('http://localhost:8080/videos')
            .then((response) => response.json())
            .then((data) => {
                console.log('called the API!')
                videos = data
                renderVideos()
            });
    });

</script>


<script type="text/plain" data-cookie-consent="tracking">
    window.trackingPermitted  = true
    console.log('tracking permitted = true' )
    renderVideos()


</script>
<script id="template" type="x-tmpl-mustache">
{{#videos}}
<div class="video">
    <h2>
        {{title}}
    </h2>
    <div class = "details">
        <div class = "published">{{ publishedAt }}</div>
        <div class = "description">{{ description }}</div>
    </div>
    {{#trackingPermitted }}
        <iframe width="560" height="315" src="https://www.youtube.com/embed/{{videoId}}" title="YouTube video player"
            frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    {{/trackingPermitted }}

</div>
{{/videos}}

</script>

<h1> Coffee + Software with Josh Long
</h1>
<div id="target"></div>
</body>
</html>
